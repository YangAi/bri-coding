(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{329:function(t,e,o){"use strict";o.r(e);var r={name:"SCardSubtitle",props:{noMargin:{type:Boolean,default:!1}},computed:{classList:function(){return this.noMargin?"tw-p-0":""}}},n=o(36),c=o(39),l=o.n(c),d=o(122),component=Object(n.a)(r,(function(){var t=this.$createElement;return(this._self._c||t)("v-card-subtitle",{staticClass:"tw-text-xs",class:this.classList},[this._t("default")],2)}),[],!1,null,"7d780a62",null);e.default=component.exports;l()(component,{VCardSubtitle:d.a})},335:function(t,e,o){var content=o(344);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(17).default)("3db7049b",content,!0,{sourceMap:!1})},343:function(t,e,o){"use strict";o(335)},344:function(t,e,o){(e=o(16)(!1)).push([t.i,'em{font-weight:700;padding-left:.25rem;padding-right:.25rem;color:rgba(244,67,54,var(--tw-text-opacity))}em,em.location{--tw-text-opacity:1}em.location{color:rgba(63,81,181,var(--tw-text-opacity))}p{font-family:ui-serif,Georgia,Cambria,"Times New Roman",Times,serif;font-size:.875rem;line-height:1.25rem}',""]),t.exports=e},398:function(t,e,o){"use strict";o.r(e);o(15),o(56),o(69),o(38),o(63),o(57);var r=o(1),n=(o(65),o(12));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={data:function(){return{timeout:void 0,loading:!0,record:{section:""},actionsList:["承包/参与项目","海外分公司/办事处","海外工厂/生产基地","举办/参加活动","产品销售/供应商","成立新部门","合作/战略合作","科研","投资 -- 合资","投资 -- 并购","其他投资","文化交流","援助","采购","设计","专业服务","获奖","资质认证/专利","政府补贴","物流"],typesList:["基础设施","能源","矿产","交通","软件和网络项目","教育","旅游","生物医疗","农业","其他"],actionType:[],confirm:!1,form:{actualParticipated:0,specificProjects:"",subsidyAmounts:"",locationMentioned:"",comment:"",typeCodedBy:this.$route.params.name,questionMark:0}}},fetch:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.briActionType.show("new",{exclude:(null===(o=t.record)||void 0===o?void 0:o._id)||""});case 3:t.record=e.sent,t.actionType=[],t.form={actualParticipated:t.record.actualParticipated,specificProjects:t.record.specificProjects,subsidyAmounts:t.record.subsidyAmounts,locationMentioned:t.record.locationMentionedAuto,comment:t.record.comment,typeCodedBy:t.$route.params.name,questionMark:t.record.questionMark||0},e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:return e.prev=11,t.loading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))()},methods:{submit:function(){var t=arguments,e=this;return Object(n.a)(regeneratorRuntime.mark((function o(){var r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=t.length>0&&void 0!==t[0]&&t[0],e.loading=!0,!0===r&&(e.form={actualParticipated:0,specificProjects:"",subsidyAmounts:"",locationMentioned:"",comment:"",codedBy:e.form.codedBy}),console.log(e.form),delete e.record.locationMentionedAuto,o.next=7,e.$api.briActionType.update(e.record._id,l(l(l({},e.record),e.form),{},{specificProjects:e.form.specificProjects||"0",subsidyAmounts:e.form.subsidyAmounts||"0",actionType:e.actionType.join("、")}));case 7:e.form={actualParticipated:0,specificProjects:"",subsidyAmounts:"",locationMentioned:"",comment:"",typeCodedBy:e.$route.params.name},e.$fetch(),e.setTimeoutAlert();case 10:case"end":return o.stop()}}),o)})))()},isImportantSection:function(section){if("string"!=typeof section)return!1;for(var t=0,e=["财务报告","重要事项","经营情况"];t<e.length;t++){var o=e[t];if(section.includes(o))return!0}return!1},checkProgress:function(){var t=this;this.$api.briActionType.show("coder/".concat(this.form.typeCodedBy)).then((function(data){t.$toast.success("".concat(t.form.typeCodedBy," 已完成 ").concat(data," 条"))})),this.$api.briActionType.show("coder/empty").then((function(data){t.$toast("总共剩余 ".concat(data," 条"))}))},setTimeoutAlert:function(){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.$router.go(0),t.$toast("超时，请重新加载")}),297e3)}}},m=(o(343),o(36)),f=o(39),v=o.n(f),y=o(326),h=o(403),_=o(393),w=o(402),x=o(394),k=o(327),C=o(395),P=o(396),j=o(386),M=o(397),component=Object(m.a)(d,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("main",{staticClass:"tw-bg-indigo-500 tw-min-h-screen"},[o("v-container",{attrs:{fluid:""}},[o("v-row",[o("v-col",{attrs:{cols:9}},[o("s-card",{staticClass:"tw-my-2"},[o("v-container",[o("p",{staticClass:"tw-text-sm tw-text-gray-600",domProps:{innerHTML:t._s(t.record.mentionPrevious)}}),t._v(" "),o("p",{class:{"tw-text-red-500 tw-font-bold":t.isImportantSection(t.record.section)}},[t._v("\n              "+t._s(t.record.section)+"\n            ")]),t._v(" "),o("p",{domProps:{innerHTML:t._s(t.record.mention)}}),t._v(" "),o("p",{staticClass:"tw-text-gray-600",domProps:{innerHTML:t._s(t.record.mentionNext)}})])],1),t._v(" "),o("s-card",[o("v-container",{staticClass:"tw-flex"},[!t.form.locationMentioned&&t.record.locationMentionedAuto?o("v-btn",{on:{click:function(e){t.form.locationMentioned=t.record.locationMentionedAuto}}},[t._v("\n              填充地区数据\n            ")]):t._e(),t._v(" "),o("v-textarea",{attrs:{"hide-details":"",clearable:"",rows:1,label:"参与地区"},model:{value:t.form.locationMentioned,callback:function(e){t.$set(t.form,"locationMentioned",e)},expression:"form.locationMentioned"}})],1),t._v(" "),o("v-container",[o("v-chip-group",{attrs:{multiple:"",column:""},model:{value:t.actionType,callback:function(e){t.actionType=e},expression:"actionType"}},[t._l(t.actionsList,(function(e){return o("v-chip",{key:e,staticStyle:{"min-width":"148px"},attrs:{value:e,filter:"",outlined:""}},[t._v("\n                "+t._s(e)+"\n              ")])})),t._v(" "),o("v-divider",{staticClass:"tw-min-w-full tw-bg-transparent"}),t._v(" "),t._l(t.typesList,(function(e){return o("v-chip",{key:e,staticStyle:{"min-width":"148px"},attrs:{value:e,filter:"",outlined:""}},[t._v("\n                "+t._s(e)+"\n              ")])}))],2),t._v(" "),o("p",{staticClass:"caption"},[t._v("\n              * 左侧的数据最好一起检查下，统一下尺度\n            ")])],1),t._v(" "),o("v-container",[o("v-btn",{attrs:{block:"",color:"accent",loading:t.$fetchState.pending||t.loading},on:{click:function(e){return t.submit(!1)}}},[t._v("\n              保存\n            ")])],1)],1)],1),t._v(" "),o("v-col",{staticClass:"tw-fixed tw-top-0 tw-right-0",attrs:{cols:3}},[o("s-card",{staticClass:"tw-my-2"},[o("v-container",{staticClass:"extended right"},[o("v-row",{attrs:{dense:""}},[1===t.form.actualParticipated?[o("v-col",{attrs:{cols:12}},[o("v-textarea",{attrs:{"hide-details":"",rows:2,label:"具体项目"},model:{value:t.form.specificProjects,callback:function(e){t.$set(t.form,"specificProjects",e)},expression:"form.specificProjects"}})],1),t._v(" "),o("v-col",{attrs:{cols:12}},[o("v-text-field",{attrs:{"hide-details":"",label:"补助金额"},model:{value:t.form.subsidyAmounts,callback:function(e){t.$set(t.form,"subsidyAmounts",e)},expression:"form.subsidyAmounts"}})],1)]:t._e(),t._v(" "),o("v-col",{attrs:{cols:12}},[o("p",{staticClass:"caption"},[t._v("\n                  * 选择后会清空上方的所有数据\n                ")]),t._v(" "),t.confirm?o("v-btn",{attrs:{loading:t.loading,block:"",dark:"",color:"red"},on:{click:function(e){t.submit(!0),t.confirm=!1}}},[t._v("\n                  确定提交\n                ")]):o("v-btn",{attrs:{loading:t.loading,block:"",text:"",color:"red"},on:{click:function(e){t.confirm=!0}}},[t._v("\n                  公司未实际参与\n                ")]),t._v(" "),o("v-textarea",{attrs:{"hide-details":"",rows:1,label:"备注"},model:{value:t.form.comment,callback:function(e){t.$set(t.form,"comment",e)},expression:"form.comment"}}),t._v(" "),o("v-checkbox",{attrs:{dense:"",label:"不确定","true-value":1,"false-value":0},model:{value:t.form.questionMark,callback:function(e){t.$set(t.form,"questionMark",e)},expression:"form.questionMark"}})],1)],2)],1)],1),t._v(" "),o("s-card",{staticClass:"tw-my-2"},[o("s-card-title",[t._v(t._s(t.record.title))]),t._v(" "),o("s-card-subtitle",[t._v(t._s(t.record.sourceYear)+" · "+t._s(t.record.industry)+" · "+t._s(t.record.actualControllerType))]),t._v(" "),o("s-card-subtitle",[o("a",{attrs:{href:t.record.docLink||t.record.link,target:"_blank"}},[t._v("\n              查看原文\n            ")])])],1),t._v(" "),o("v-btn",{attrs:{block:""},on:{click:t.checkProgress}},[t._v("\n          查看我的进度\n        ")]),t._v(" "),o("s-card",{staticClass:"tw-my-2"},[o("v-container",[o("v-text-field",{attrs:{dense:"","hide-details":"",label:"Coder"},model:{value:t.form.typeCodedBy,callback:function(e){t.$set(t.form,"typeCodedBy",e)},expression:"form.typeCodedBy"}})],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;v()(component,{SCard:o(217).default,SCardTitle:o(216).default,SCardSubtitle:o(329).default}),v()(component,{VBtn:y.a,VCheckbox:h.a,VChip:_.a,VChipGroup:w.a,VCol:x.a,VContainer:k.a,VDivider:C.a,VRow:P.a,VTextField:j.a,VTextarea:M.a})}}]);